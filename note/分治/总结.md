# 分治｜总结

先把“合并”的数据流走通，再去考虑分治的细枝末节，否则边界容易混乱。

## 模板（本仓风格）

1) 归并排序（半开区间）
```cpp
# include <vector>
using namespace std;
class Solution2 {
public:
    vector<int> ret;
    vector<int> sortArray(vector<int>& nums) {
        ret.resize(nums.size());
        MergeSort(nums, nums.begin(), nums.end());
        return ret;
    }
    void MergeSort(vector<int>& nums, vector<int>::iterator begin, vector<int>::iterator end) {
        if (begin >= end - 1) return;
        auto mid = begin + (end - begin + 1) / 2;
        MergeSort(nums, begin, mid);
        MergeSort(nums, mid, end);
        auto left = begin, right = mid;
        auto p = ret.begin() + (begin - nums.begin());
        while (left < mid && right < end) {
            if (*left < *right) *(p++) = *(left++);
            else *(p++) = *(right++);
        }
        while (left < mid) *(p++) = *(left++);
        while (right < end) *(p++) = *(right++);
        auto tp = ret.begin() + (begin - nums.begin());
        while (begin < end) *(begin++) = *(tp++);
    }
};
```

2) 三指针快速排序（选段自实现）
```cpp
// 核心：随机 pivot + 三路分区；平均 O(n log n)，最坏 O(n^2)
```

## 复杂度
- 归并排序：O(n log n)，空间 O(n)
- 快速排序：期望 O(n log n)，原地 O(1)

## 题目索引（代码与力扣链接）
- 912 排序数组 — [代码](../../code/分治/912%20排序数组.cpp) | [LeetCode](https://leetcode.cn/problems/sort-an-array/)
- 215 数组中的第K个最大元素 — [代码](../../code/分治/215%20数组中的第K个最大元素.cpp) | [LeetCode](https://leetcode.cn/problems/kth-largest-element-in-an-array/)
- 493 翻转对 — [代码](../../code/分治/493%20翻转对.cpp) | [LeetCode](https://leetcode.cn/problems/reverse-pairs/)
- 75 颜色分类 — [代码](../../code/分治/75%20颜色分类.cpp) | [LeetCode](https://leetcode.cn/problems/sort-colors/)
- LCR 159 库存管理 III — [代码](../../code/分治/LCR%20159%20库存管理%20III.cpp) | [LeetCode](https://leetcode.cn/problems/zui-xiao-de-kge-shu-lcof/)
- LCR 170 交易逆序对的总数 — [代码](../../code/分治/LCR%20170%20交易逆序对的总数.cpp) | [LeetCode](https://leetcode.cn/problems/shu-zu-zhong-de-ni-xu-dui-lcof/)

