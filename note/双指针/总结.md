# 双指针｜总结

我的习惯：能排序再对撞就排序；需要原地修改就快慢；区间类则用滑动窗口（另见窗口专题）。

## 模板（按我自己的写法）

1) 三数之和（排序 + 对撞 + 去重）
```cpp
# include <vector>
# include <algorithm>
using namespace std;
class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        vector<vector<int>> ret{};
        sort(nums.begin(), nums.end());
        for (auto large = nums.end() - 1; large > nums.begin() + 1; --large) {
            if (*large < 0) break; // 剪枝
            if (large < nums.end() - 1 && *(large + 1) == *large) continue; // 去重
            auto left = nums.begin(), right = large - 1;
            while (right > left) {
                long long s = (long long)*left + *right + *large;
                if (s > 0) right--;
                else if (s < 0) left++;
                else {
                    ret.push_back({*left, *right, *large});
                    left++; right--;
                    while ((right > left) && *right == *(right + 1)) right--; // 去重
                    while ((right > left) && *left == *(left - 1)) left++;
                }
            }
        }
        return ret;
    }
};
```

2) 接雨水（双指针）
```cpp
# include <vector>
using namespace std;
class Solution {
public:
    int trap(vector<int>& height) {
        auto left = height.begin(), right = height.end() - 1;
        int ret = 0, left_max = 0, right_max = 0;
        while (left <= right) {
            if (left_max < right_max) {
                ret += max(0, left_max - *left);
                left_max = max(left_max, *left);
                left++;
            } else {
                ret += max(0, right_max - *right);
                right_max = max(right_max, *right);
                right--;
            }
        }
        return ret;
    }
};
```

## 复杂度
- 排序 + 双指针：O(n log n)，空间 O(1)
- 纯双指针扫描：O(n)，空间 O(1)

## 题目索引（代码与力扣链接）
- 15 三数之和 — [代码](../../code/双指针/15三数之和.cpp) | [LeetCode](https://leetcode.cn/problems/3sum/)
- 42 接雨水 — [代码](../../code/双指针/42%20接雨水.cpp) | [LeetCode](https://leetcode.cn/problems/trapping-rain-water/)
- 11 盛最多水的容器 — [代码](../../code/双指针/11盛最多水的容器.cpp) | [LeetCode](https://leetcode.cn/problems/container-with-most-water/)
- 18 四数之和 — [代码](../../code/双指针/18.%20四数之和.cpp) | [LeetCode](https://leetcode.cn/problems/4sum/)
- 283 移动零 — [代码](../../code/双指针/283移动零.cpp) | [LeetCode](https://leetcode.cn/problems/move-zeroes/)
- 1089 复写零 — [代码](../../code/双指针/1089%20复写零.cpp) | [LeetCode](https://leetcode.cn/problems/duplicate-zeros/)
- 611 有效三角形的个数 — [代码](../../code/双指针/611有效三角形的个数.cpp) | [LeetCode](https://leetcode.cn/problems/valid-triangle-number/)
- 202 快乐数 — [代码](../../code/双指针/202快乐数.cpp) | [LeetCode](https://leetcode.cn/problems/happy-number/)
- LCR 179 查找总价格为目标值的两个商品 — [代码](../../code/双指针/LCR%20179%20查找总价格为目标值的两个商品.cpp) | [LeetCode](https://leetcode.cn/problems/he-wei-sde-liang-ge-shu-zi-lcof/)

